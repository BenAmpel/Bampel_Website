{{ define "main" }}
{{ partial "views/publication" . }}

{{ with .Params.doi }}
{{ if ne . "" }}
<style>
.altmetric-badge-section {
  margin: 30px auto;
  padding: 20px;
  max-width: 800px;
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  border-radius: 12px;
  border: 1px solid #e2e8f0;
}
.dark .altmetric-badge-section {
  background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
  border-color: #475569;
}
.altmetric-badge-section h4 {
  margin: 0 0 15px 0;
  font-size: 1rem;
  font-weight: 600;
}
.altmetric-badge-section p {
  margin: 0;
  font-size: 0.9rem;
  color: #64748b;
}
.dark .altmetric-badge-section p {
  color: #94a3b8;
}
</style>
<div class="container">
  <div class="altmetric-badge-section">
    <h4>ðŸ“Š Altmetric Attention Score</h4>
    <div style="display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
      <div data-badge-type="medium-donut" data-doi="{{ . }}" data-badge-popover="right" class="altmetric-embed"></div>
      <div style="flex: 1; min-width: 200px;">
        <p>
          This badge shows attention from news, blogs, Twitter, policy documents, and more.
          <a href="https://www.altmetric.com/details/doi/{{ . }}" target="_blank" style="color: #3b82f6;">View details â†’</a>
        </p>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  setTimeout(function() {
    if (typeof _altmetric_embed_init === 'function') {
      _altmetric_embed_init();
    }
  }, 100);
</script>
{{ end }}
{{ end }}

{{ end }}
