{{/* Dimensions Badge Shortcode - Usage: {{< dimensions doi="10.xxxx/xxxxx" >}} */}}
{{ $doi := .Get "doi" }}
{{ if $doi }}
<div class="dimensions-badge-section">
  <h4 style="margin: 0 0 15px 0; font-size: 1rem; font-weight: 600;">ðŸ“ˆ Dimensions Citation Metrics</h4>
  <div style="display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
    <span class="__dimensions_badge_embed__" data-doi="{{ $doi }}" data-style="large_rectangle" data-legend="hover-right"></span>
    <div style="flex: 1; min-width: 200px;">
      <p style="margin: 0; font-size: 0.9rem;">
        Dimensions tracks citations across scholarly literature, patents, clinical trials, and policy documents.
        <a href="https://app.dimensions.ai/discover/publication?search_text={{ $doi }}" target="_blank">View full metrics â†’</a>
      </p>
    </div>
  </div>
</div>
<script>
(function() {
  function loadDimensionsBadge() {
    if (typeof __dimensions_embed !== 'undefined' && __dimensions_embed.addBadges) {
      __dimensions_embed.addBadges();
    } else {
      // Script not loaded yet, try again
      setTimeout(loadDimensionsBadge, 500);
    }
  }
  if (document.readyState === 'complete') {
    setTimeout(loadDimensionsBadge, 100);
  } else {
    window.addEventListener('load', function() {
      setTimeout(loadDimensionsBadge, 100);
    });
  }
})();
</script>
{{ end }}
