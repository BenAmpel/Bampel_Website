{{/* Dimensions Badge Shortcode - Usage: {{< dimensions doi="10.xxxx/xxxxx" >}} */}}
{{ $doi := .Get "doi" }}
{{ if $doi }}
<div class="dimensions-badge-section" style="margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border-radius: 12px; border: 1px solid #bae6fd;">
  <style>
    .dark .dimensions-badge-section {
      background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%) !important;
      border-color: #334155 !important;
    }
    .dark .dimensions-badge-section h4 {
      color: #00ff41 !important;
    }
    .dark .dimensions-badge-section p {
      color: #94a3b8 !important;
    }
    /* Cyber mode grayscale effect */
    .dark .__dimensions_badge_embed__ {
      filter: grayscale(100%) contrast(120%);
      opacity: 0.8;
      transition: all 0.3s ease;
    }
    .dark .__dimensions_badge_embed__:hover {
      filter: none;
      opacity: 1;
    }
  </style>
  <h4 style="margin: 0 0 15px 0; font-size: 1rem; font-weight: 600;">ðŸ“ˆ Dimensions Citation Metrics</h4>
  <div style="display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
    <span class="__dimensions_badge_embed__" 
          data-doi="{{ $doi }}" 
          data-style="large_rectangle" 
          data-legend="hover-right">
    </span>
    <div style="flex: 1; min-width: 200px;">
      <p style="margin: 0; font-size: 0.9rem; color: #475569;">
        Dimensions tracks citations across scholarly literature, patents, clinical trials, and policy documents.
        <a href="https://badge.dimensions.ai/details/doi/{{ $doi }}" target="_blank" style="color: #0284c7;">View full metrics â†’</a>
      </p>
    </div>
  </div>
</div>
<script type="text/javascript">
(function() {
  function initDimensionsBadge() {
    // Dimensions badges auto-initialize, but we can force a refresh
    if (typeof __dimensions_embed !== 'undefined' && typeof __dimensions_embed.addBadges === 'function') {
      __dimensions_embed.addBadges();
    }
  }
  if (document.readyState === 'complete') {
    initDimensionsBadge();
  } else {
    window.addEventListener('load', initDimensionsBadge);
  }
  setTimeout(initDimensionsBadge, 1000);
  setTimeout(initDimensionsBadge, 3000);
})();
</script>
{{ end }}
