<div id="altmetric-summary-box" style="display:none; margin: 30px 0; padding: 25px; background: var(--card-bg, rgba(255,255,255,0.02)); border: 1px solid var(--card-border, #333); border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.05);">
    <div style="display:flex; align-items:center; gap:15px; margin-bottom:20px; border-bottom:1px solid var(--card-border, #444); padding-bottom:15px;">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16 29.3333C23.3638 29.3333 29.3333 23.3638 29.3333 16C29.3333 8.63616 23.3638 2.66663 16 2.66663C8.63616 2.66663 2.66663 8.63616 2.66663 16C2.66663 23.3638 8.63616 29.3333 16 29.3333Z" fill="url(#paint0_linear)"/>
            <path d="M22.5 16C22.5 19.5899 19.5899 22.5 16 22.5C12.4101 22.5 9.5 19.5899 9.5 16C9.5 12.4101 12.4101 9.5 16 9.5C19.5899 9.5 22.5 12.4101 22.5 16Z" fill="white"/>
            <defs>
                <linearGradient id="paint0_linear" x1="2.66663" y1="2.66663" x2="29.3333" y2="29.3333" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#00E5FF"/>
                    <stop offset="0.33" stop-color="#00FF41"/>
                    <stop offset="0.66" stop-color="#FFD700"/>
                    <stop offset="1" stop-color="#FF4136"/>
                </linearGradient>
            </defs>
        </svg>
        <div>
            <h4 style="margin:0; font-size:1.1rem; font-weight:700; color:inherit;">Cumulative Research Attention</h4>
            <span style="font-size:0.8rem; opacity:0.7;">Aggregated impact across news, policy, and social media</span>
        </div>
    </div>

    <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap:20px; text-align:center;">
        <div><div id="am-total-score" style="font-size:2rem; font-weight:800; color:#00e5ff;">0</div><div style="font-size:0.75rem; opacity:0.7;">Total Score</div></div>
        <div><div id="am-news" style="font-size:1.5rem; font-weight:700;">0</div><div style="font-size:0.75rem; opacity:0.6;">News Stories</div></div>
        <div><div id="am-policy" style="font-size:1.5rem; font-weight:700;">0</div><div style="font-size:0.75rem; opacity:0.6;">Policy Docs</div></div>
        <div><div id="am-twitter" style="font-size:1.5rem; font-weight:700;">0</div><div style="font-size:0.75rem; opacity:0.6;">Social Mentions</div></div>
    </div>
</div>

<script>
(function() {
    fetch('/data/altmetric.json')
    .then(r => r.json())
    .then(data => {
        if(data) {
            document.getElementById('altmetric-summary-box').style.display = 'block';
            
            // Simple animation
            const animate = (id, val) => {
                const el = document.getElementById(id);
                let start = 0;
                const duration = 1000;
                const startTime = performance.now();
                const tick = (now) => {
                    const progress = Math.min((now - startTime) / duration, 1);
                    el.innerText = Math.floor(progress * val);
                    if(progress < 1) requestAnimationFrame(tick);
                };
                requestAnimationFrame(tick);
            };

            animate('am-total-score', data.score);
            document.getElementById('am-news').innerText = data.news;
            document.getElementById('am-policy').innerText = data.policy;
            document.getElementById('am-twitter').innerText = data.twitter;
        }
    })
    .catch(e => console.log('Altmetric data not loaded'));
})();
</script>
